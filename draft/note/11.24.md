1. 切分每个特征的时间区间
2. 对所有时间区间取交集，得到有效的时间区间
3. 每个区间作特征计算



圈选问题：

1. 批处理实现流程、ADB分库，对于数据准确性/时效性的影响
2. 批处理性能
3. 流处理、批处理之间怎么配合
4. 预览实现：预览和实际圈选的逻辑如何保持一致
5. 组合特征圈选
6. 时间属性





进展

1. 背景
   1. 数据时效性：目前物料系统选品依赖定时的规则打标，产生大量无效消息，并且缺乏数据时效性；数据存在截断，影响数据准确性。同时圈选对下游使用缺乏系统化对接，缺乏元信息管理。
2. 目标
   1. 当下目标：对现有的选品和分库问题进行架构治理，提升时效性和稳定性
   2. 长远目标：建设物料平台核心物料圈选输出、元信息管理能力
3. 进展
   1. 调研
   2. 详细设计讨论阶段



物料平台负责物料产品化表达接入、物料圈选输出、物料效果统计挖掘整体的产品化链路，圈选在其中作为基础能力，需要建设进行现有的架构治理和能力升级。



### 规则校验流程

1. 需要将特征进行多值切分，如果多个字段之间存在多值一一对应关系，那么切分规则也需要一一对应
2. 特征上带生效时间属性，如果存在时间区间不一致的特征，需要对时间区间取交集作切割，作为标的生效时间；如果存在多个生效时间，那么标的生效时间也存在多个

1. 针对每个时间区间内的特征值，进行规则校验，每个区间分别产出标结果







https://yuque.antfin.com/union-engineering/engine/hrfw36



规则：

订单统计规则：当前联盟到手价 <= 成交订单SKU价 <= 双十一成交价 且 满足条件的订单数 > 10 

价格门槛规则：当前联盟到手价 <= 双十一成交价 * 0.5





有时间属性/无时间属性

单值/多值

单特征/多特征



1. 无时间属性，即时间区间为永久，例：IC标
2. 有时间属性，单特征：折扣价、佣金、券
3. 有时间属性，组合特征：券后价



1. IC标

123 456